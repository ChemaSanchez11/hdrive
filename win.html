<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Drive estilo Windows 11</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
</head>

<body>

<!-- ESCRITORIO -->
<div id="desktop">
    <div class="icon" ondblclick="openDrive('/')">ğŸ“<span>Mi Drive</span></div>
    <div class="icon" ondblclick="openDrive('/proyectos')">ğŸ“<span>Proyectos</span></div>
    <div class="icon" ondblclick="openDrive('/imagenes')">ğŸ“<span>ImÃ¡genes</span></div>
    <div class="icon" ondblclick="openFile('notas.txt')">ğŸ“„<span>notas.txt</span></div>
    <div class="icon" ondblclick="openFile('tareas.docx')">ğŸ“„<span>tareas.docx</span></div>
</div>

<!-- EXPLORADOR -->
<div class="window" id="explorer">
    <div class="titlebar">
        <span id="path">Mi Drive</span>
        <button class="btn btn-sm btn-light" onclick="closeWindow('#explorer')">âœ–</button>
    </div>
    <div class="window-content" id="files"></div>
</div>

<!-- VISOR DE ARCHIVOS -->
<div class="window" id="viewer" style="width:500px;height:300px;">
    <div class="titlebar">
        <span id="fileName">Archivo</span>
        <button class="btn btn-sm btn-light" onclick="closeWindow('#viewer')">âœ–</button>
    </div>
    <div class="window-content" id="fileContent">
        <p>Contenido del archivo...</p>
    </div>
</div>

<!-- USUARIOS -->
<div class="window" id="users" style="left:220px;top:120px;">
    <div class="titlebar">
        <span>Usuarios</span>
        <button class="btn btn-sm btn-light" onclick="closeWindow('#users')">âœ–</button>
    </div>
    <div class="window-content">
        <ul class="list-group">
            <li class="list-group-item d-flex justify-content-between">admin <span class="badge bg-success">Activo</span></li>
            <li class="list-group-item d-flex justify-content-between">chema <span class="badge bg-secondary">Invitado</span></li>
            <li class="list-group-item d-flex justify-content-between">backup <span class="badge bg-warning">Sistema</span></li>
        </ul>
    </div>
</div>

<!-- DISCO -->
<div class="window" id="disk" style="left:300px;top:160px;">
    <div class="titlebar">
        <span>Administrador de disco</span>
        <button class="btn btn-sm btn-light" onclick="closeWindow('#disk')">âœ–</button>
    </div>
    <div class="window-content">
        <p><strong>Espacio usado</strong></p>
        <div class="progress mb-3">
            <div class="progress-bar bg-info" style="width:65%">65%</div>
        </div>
        <ul class="list-group">
            <li class="list-group-item d-flex justify-content-between">Documentos <span>4.2 GB</span></li>
            <li class="list-group-item d-flex justify-content-between">ImÃ¡genes <span>2.1 GB</span></li>
            <li class="list-group-item d-flex justify-content-between">VÃ­deos <span>6.7 GB</span></li>
        </ul>
    </div>
</div>

<!-- TASKBAR -->
<div id="taskbar">
    <div class="task-icon" onclick="openDrive('/')">ğŸ—‚ï¸</div>
    <div class="task-icon" onclick="openWindow('#users')">ğŸ‘¤</div>
    <div class="task-icon" onclick="openWindow('#disk')">ğŸ’½</div>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>

<script>
    let zIndex = 20;
    let currentPath = '/';

    const fs = {
        '/': [
            {type:'folder',name:'Proyectos',path:'/proyectos'},
            {type:'folder',name:'ImÃ¡genes',path:'/imagenes'},
            {type:'file',name:'informe.pdf'},
            {type:'file',name:'contrato.docx'}
        ],
        '/proyectos': [
            {type:'file',name:'app.js'},
            {type:'file',name:'diseÃ±o.fig'},
            {type:'file',name:'README.md'}
        ],
        '/imagenes': [
            {type:'file',name:'foto1.png'},
            {type:'file',name:'banner.jpg'}
        ]
    };

    const desktopFiles = {
        'notas.txt':'Estas son mis notas de ejemplo...',
        'tareas.docx':'Lista de tareas pendientes...'
    };

    function openDrive(path){
        currentPath = path;
        $('#path').text('Mi Drive ' + path);
        renderFiles();
        openWindow('#explorer');
    }

    function renderFiles(){
        const container = $('#files');
        container.empty();

        if(currentPath !== '/'){
            container.append(`<div class="file" onclick="openDrive('/')">â¬…ï¸ Volver</div>`);
        }

        fs[currentPath].forEach(item=>{
            if(item.type==='folder'){
                container.append(`<div class="file" onclick="openDrive('${item.path}')">ğŸ“ ${item.name}</div>`);
            }else{
                container.append(`<div class="file" onclick="openFile('${item.name}')">ğŸ“„ ${item.name}</div>`);
            }
        });
    }

    function openFile(name){
        let content = desktopFiles[name] || "Contenido simulado del archivo " + name;
        $('#fileName').text(name);
        $('#fileContent').html('<pre>'+content+'</pre>');
        openWindow('#viewer');
    }

    function openWindow(sel){
        $(sel).show().css('z-index',++zIndex);
    }
    function closeWindow(sel){$(sel).hide();}

    $(function(){
        $('.window').draggable({
            handle:'.titlebar',
            containment:'body',
            start:function(){$(this).css('z-index',++zIndex);}
        });
    });
</script>

</body>
</html>